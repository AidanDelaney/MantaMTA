@{
	ViewBag.Title = "Sends";
	Layout = "../_Layout.cshtml";
}
<script type="text/javascript">
	$('.nav a[href="/sends"]').parent().addClass('active')
</script>
<table class="table table-striped table-hover">
	<thead>
		<tr>
			<th>Send</th>
			<th>Status</th>
			<th>Started</th>
			<th>Messages</th>
			<th>Waiting</th>
			<th>Deferred</th>
			<th>Failed</th>
			<th>Throttled</th>
			<th>Delivered</th>
		</tr>
	</thead>
	<tbody>
@foreach(System.Data.DataRow row in Model.Tables[0].Rows)
{
	<tr>
		<td><a href="/sends/report?sendid=@row[0]">@row[0]</a></td>
		<td>@switch((MantaMTA.Core.Enums.SendStatus)row[2]){
		case MantaMTA.Core.Enums.SendStatus.Active:
			  @:<span class='label label-success'>Active</span>
			  break;
		case MantaMTA.Core.Enums.SendStatus.Discard:
			@:<span class='label label-important'>Discarding</span>
			break;
		case MantaMTA.Core.Enums.SendStatus.Paused:
			@:<span class='label label-warning'>Paused</span>
			break;
		default:
			@:unknown
		break;
		}
		</td>
		<td>@row[3]</td>
		<td>@(((int)row[4]).ToString("N0"))</td>
		<td class="text-warning">@(((int)row[5]).ToString("N0"))</td>
		<td class='text-info'>@(((int)row[6]).ToString("N0"))</td>
		<td class='text-error'>@(((int)row[7] + (int)row[8]).ToString("N0"))</td>
		<td class="muted">@(((int)row[9]).ToString("N0"))</td>
		<td class='text-success'>@(((int)row[10]).ToString("N0"))</td>
		<td>
			@if ((MantaMTA.Core.Enums.SendStatus)row[2] != MantaMTA.Core.Enums.SendStatus.Paused){
				<a href="/sends/pause?sendIID=@row[1]" class="btn btn-warning">Pause</a>
			}
			@if ((MantaMTA.Core.Enums.SendStatus)row[2] != MantaMTA.Core.Enums.SendStatus.Discard){
				<a href="/sends/discard?sendIID=@row[1]" class="btn btn-danger">Discard</a>
			}
			@if ((MantaMTA.Core.Enums.SendStatus)row[2] != MantaMTA.Core.Enums.SendStatus.Active){
				<a href="/sends/resume?sendIID=@row[1]" class="btn btn-success">Resume</a>
			}
		</td>
	</tr>
			
}
	</tbody>
</table>